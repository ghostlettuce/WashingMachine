library IEEE;
use IEEE.STD_LOGIC_1164.all;

entity Regi is :
	port(onoff     : in std_logic;
		  reset 		 : in  std_logic;
		  clk			 : in  std_logic;
		  dataIn     : in std_logic_vector(3 downto 0);--meter as entradas todas nos interruptores sw : p1, p2, p3 e porta aberta e fechado
		  dataOut	 : out std_logic_vector (3 downto 0);
		  enable     : out std_logic);
		  startop    : in  std_logic; 
end Regi;

architecture Behavioral of Reg is
begin
	regi_proc : process(on_off, Reset, clk)
	begin
		if(on_off = '1') then
		enable <= '1';
			if(startop = '1') then
				if (Reset = '1') then
					dataOut <= (others => '0');
				elsif (rising_edge(clk)) then
						if (Reset = '1') then
							dataOut <= (others => '0');
						else
							dataOut <= dataIn;
					end if;
				end if;
			else 
				enable <= '0';
			end if;
		end if;
	end process;
end Behavioral;